# Test Configuration: Manual Child Domain Testing
# Purpose: Deploy parent domain + standalone server for manual child domain DSC testing

name: "manual-child-dc-test"
description: "Simple lab for manual child domain DSC testing"
location: "eastus"
resource_group: "rg-manual-child-test"

# Network Configuration
network:
  vnet_name: "vnet-test"
  address_space: "192.168.0.0/16"
  
  subnets:
    - name: "snet-default"
      address_prefix: "192.168.1.0/24"
  
  remote_access:
    mode: "AzureBastionHost"
    bastion:
      subnet_prefix: "192.168.2.0/26"

# Credentials
credentials:
  admin_username: "labadmin"
  admin_password: "YourPassword123!"

# Virtual Machines
virtual_machines:
  # Parent Domain Controller
  - name: "DC-PARENT"
    type: "windows_server"
    role: "domain_controller"
    size: "Standard_B2ms"
    os:
      sku: "2019-Datacenter"
    network:
      subnet: "snet-default"
      private_ip: "192.168.1.4"
  
  # Future Child DC (standalone - will NOT be joined to domain)
  - name: "DC-CHILD"
    type: "windows_server"
    size: "Standard_B2ms"
    os:
      sku: "2019-Datacenter"
    network:
      subnet: "snet-default"
      private_ip: "192.168.1.5"
    join_domain: false  # ‚Üê KEY: Prevents automatic domain join

# Active Directory Configuration
active_directory:
  enabled: true
  domain_fqdn: "corp.local"
  domain_netbios: "CORP"
  
  users:
    - first_name: "Test"
      last_name: "User"
      sam_account: "testuser"
      password: "TestPass123!"
      department: "IT"
      job_title: "Administrator"
      groups: ["Domain Admins"]

# Tags
tags:
  environment: "test"
  purpose: "manual-dsc-testing"
  project: "blacksmith"